<setup numProcess="2">
    <generate name="container" count="1">
        <generate name="synthetic_customers" count="1000" pageSize="100"
            source="script/person_data.json" cyclic="True">
            <key name="id" generator="IncrementGenerator" />

            <!-- Source Constraints: Filter input data -->
            <sourceConstraints>
                <rule if="age < 30" then="risk_profile == 'High'" />
                <rule if="age >= 30 and age < 50" then="risk_profile == 'Medium'" />
                <rule if="age >= 50" then="risk_profile == 'Low'" />
            </sourceConstraints>

            <!-- Mapping: Transform attributes based on source constraints -->
            <mapping>
                <rule if="risk_profile == 'High'" then="interest_rate = 0.15" />
                <rule if="risk_profile == 'Medium'" then="interest_rate = 0.10" />
                <rule if="risk_profile == 'Low'" then="interest_rate = 0.05" />
                <!-- Additional rules for credit limits -->
                <rule if="income > 100000" then="credit_limit = 50000" />
                <rule if="income > 50000" then="credit_limit = 25000" />
                <rule if="income > 30000" then="credit_limit = 10000" />
                <rule if="income <= 30000" then="credit_limit = 5000" />
            </mapping>

            <!-- Target Constraints: Final validation -->
            <targetConstraints>
                <rule if="credit_limit >= 25000 and interest_rate <= 0.08"
                    then="approval_status = 'Approved'" />
                <rule if="credit_limit < 25000 or interest_rate > 0.08"
                    then="approval_status = 'Review'" />
                <rule if="credit_limit <= 5000 and interest_rate >= 0.12"
                    then="approval_status = 'Denied'" />
            </targetConstraints>
        </generate>
    </generate>
</setup> 