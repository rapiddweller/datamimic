<?xml version="1.0" encoding="UTF-8"?>
<setup>
    <!-- WHY: Load deterministic helpers so payment selection and IDs respect seeded RNG. -->
    <execute uri="script/customer.scr.py" />
    <echo>Generating Customer Data</echo>

    <!-- Customers using Person entity from Common domain -->
    <generate name="customers" count="50" target="LogExporter">
        <variable name="person" entity="Person(min_age=18, max_age=80)" rngSeed="501" />
        <key name="customer_id" script="stable_customer_id(person, 'customers')" />
        <key name="given_name" script="person.given_name" />
        <key name="family_name" script="person.family_name" />
        <key name="name" script="person.name" />
        <key name="gender" script="person.gender" />
        <key name="age" script="person.age" />
        <key name="date_of_birth" script="person.birthdate" />
        <key name="email" script="person.email" />
        <key name="phone" script="person.phone" />
        <key name="mobile_phone" script="person.mobile_phone" />
        <variable name="address" script="person.address" />
        <key name="street" script="address.street" />
        <key name="house_number" script="address.house_number" />
        <key name="city" script="address.city" />
        <key name="postal_code" script="address.postal_code" />
        <key name="state" script="address.state" />
        <key name="country" script="address.country" />
        <key name="full_address" script="address.full_address" />
        <key name="preferred_payment"
            script="select_payment_method(person, ('CreditCard', 'PayPal', 'BankTransfer', 'CashOnDelivery'), 'customers')" />
        <key name="customer_since" script="stable_customer_since(person, 'customers')" />
    </generate>

    <!-- US Customers -->
    <echo>Generating US Customer Data</echo>
    <generate name="us_customers" count="25" target="LogExporter">
        <variable name="person" entity="Person(min_age=21, max_age=75)" locale="en_US" rngSeed="1701" />
        <key name="customer_id" script="stable_customer_id(person, 'us_customers')" />
        <key name="given_name" script="person.given_name" />
        <key name="family_name" script="person.family_name" />
        <key name="email" script="person.email" />
        <key name="phone_number" script="person.phone" />
        <variable name="address" script="person.address" />
        <key name="full_address" script="address.full_address" />
        <key name="state" script="address.state" />
        <key name="preferred_payment"
            script="select_payment_method(person, ('CreditCard', 'PayPal', 'ApplePay', 'CashOnDelivery'), 'us_customers')" />
    </generate>

    <!-- German Customers -->
    <echo>Generating German Customer Data</echo>
    <generate name="de_customers" count="25" target="LogExporter">
        <variable name="person" entity="Person(min_age=18, max_age=80)" locale="de_DE" rngSeed="2702" />
        <key name="customer_id" script="stable_customer_id(person, 'de_customers')" />
        <key name="given_name" script="person.given_name" />
        <key name="family_name" script="person.family_name" />
        <key name="email" script="person.email" />
        <key name="phone_number" script="person.phone" />
        <variable name="address" script="person.address" />
        <key name="full_address" script="address.full_address" />
        <key name="bundesland" script="address.state" />
        <key name="preferred_payment"
            script="select_payment_method(person, ('SEPA', 'PayPal', 'Klarna', 'BankTransfer'), 'de_customers')" />
</generate>
</setup> 
